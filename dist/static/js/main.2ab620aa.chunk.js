(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{17:function(e,t){},28:function(e,t,n){},30:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},39:function(e,t){},40:function(e,t){},53:function(e,t,n){},54:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),s=n(9),r=n.n(s),o=(n(28),n(0)),c=n(3),u=n(4),l=n(7),d=n(6),h=n(5),p=n(18),b=n.n(p),f=function(){return!/^h/.test(document.location.toString())},v=Object(o.a)(Object(o.a)({},window.settings),{},{content:window.content,store:{},developerTitle:"mediasmit.ru",developerUrl:"http://www.mediasmit.ru/",developerHead:null,developerTexts:["\u041c\u044b \u0441\u043e\u0437\u0434\u0430\u0435\u043c digital-\u043f\u0440\u043e\u0434\u0443\u043a\u0442\u044b, \u043d\u0430\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u043d\u0430 \u0440\u0435\u0448\u0435\u043d\u0438\u0435 \u0431\u0438\u0437\u043d\u0435\u0441-\u0437\u0430\u0434\u0430\u0447 \u043a\u043b\u0438\u0435\u043d\u0442\u043e\u0432","mediasmit.ru"],startAppText:"Presentation Engine started",assetsUrl:".",defaultState:{playbackStarted:!1,position:-1,viewPosition:0,cacheStack:[],readyToInit:!1,blockRender:!1,blockInteraction:!1},isMobile:new b.a(window.navigator.userAgent).mobile(),isLocal:f(),isDev:document.location.toString().indexOf("localhost")>0,anyImage:/\.(gif|jpg|jpeg|png|svg)$/gi,indexHtmlFile:"index.html",parentWindowId:"PARENT"});v.useEmbeddedContent=v.useEmbeddedContent||f();var m=v,y=function(e){var t=!0;for(var n in e){var i=e[n];if(!i.loaded&&!i.ignore){t=!1;break}}return t},O=function(e,t){var n=t.cacheStack,i=n.indexOf(e);(i>=0&&n.splice(i,1),n.push(e),n.length>m.cacheSize)&&n.splice(0,n.length-m.cacheSize).map((function(e){var n=t.sequence[e];Object.values(n.layers).map((function(e){e.loaded=!1,e.included=!1,e.visible=!1}))}))},g=function(e,t){var n={},i=e.sequence[t];return i&&(n[i.id]=!0),e.sequence.map((function(e){var t=n[e.id];for(var i in e.layers){var a=e.layers[i];t&&(a.included=!0,a.ignore&&(a.loaded=!0))}})),e.blockInteraction=!0,y(i.layers)&&(O(t,e),e.readyToInit=!0),e},j=function(e,t,n){var i=e.sequence[t].layers;return i[n].loaded=!0,e.readyToInit=y(i),e.readyToInit&&O(t,e),e.blockRender=!0,e},x=function(e){return e.sequence.map((function(t,n){Object.values(t.layers).map((function(t){t.loaded&&(t.included=!0,t.visible=!0,t.static&&(t.visible=n===e.position))}))})),e.viewPosition=e.position,e.readyToInit=!1,e.blockRender=!1,e.position===m.startPosition&&(e.blockInteraction=!1),e},w=function(e,t){return e=g(e,t),Object(o.a)(Object(o.a)({},e),{},{position:t})},k=function(e,t){var n=e.position,i=e.sequence.find((function(e){return e.id===t}));return i&&(e=g(e,i.index),n=i.index),Object(o.a)(Object(o.a)({},e),{},{position:n})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(console.log("navReducer",t),t.type){case"START_PLAYBACK":e=Object(o.a)(Object(o.a)({},w(e,0)),{},{playbackStarted:!0});break;case"NEXT_SLIDE":var n=e.position;n<e.sequence.length-1&&(e=Object(o.a)({},w(e,n+1)));break;case"PREV_SLIDE":var i=e.position;i>0&&(e=Object(o.a)({},w(e,i-1)));break;case"GOTO_SLIDE_INDEX":e=Object(o.a)({},w(e,t.index));break;case"GOTO_SLIDE":e=Object(o.a)({},k(e,t.id));break;case"APPLY_VIEW_POSITION":e=Object(o.a)(Object(o.a)({},e),{},{viewPosition:e.position});break;case"BLOCK_INTERACTION":e=Object(o.a)(Object(o.a)({},e),{},{blockInteraction:!0});break;case"UNBLOCK_INTERACTION":e=Object(o.a)(Object(o.a)({},e),{},{blockInteraction:!1});break;case"HIDE_LAYER":var a=e.sequence[t.index];if(a){var s=a.layers[t.name];s&&(s.hiddenNow=!0,e=Object(o.a)({},e))}break;case"SHOW_LAYER":var r=e.sequence[t.index];if(r){var c=r.layers[t.name];c&&(c.hiddenNow=!1,e=Object(o.a)({},e))}break;case"SWITCH_LAYER":var u=e.sequence[t.index];if(u){var l=u.layers[t.name];l&&(l.hiddenNow?l.hiddenNow=!1:l.hiddenNow=!0,e=Object(o.a)({},e))}}return e},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(console.log("assetReducer",t),t.type){case"VIEW_LOADED":e=Object(o.a)({},j(e,t.slideIndex,t.layerName));break;case"INIT_IS_DONE":e=Object(o.a)({},x(e))}return e},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(console.log("mainReducer",t),t.type){case"APP_INIT":e=Object(o.a)(Object(o.a)({},e),m.defaultState);break;case"SET_STORE_DATA":case"LOAD_STORE_DATA_ERROR":e=Object(o.a)(Object(o.a)({},e),t.data)}return e},I=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;return n.extraAction&&(t=e(t,n.extraAction)),t=T(t,n),t=S(t,n),t=E(t,n)},L=n(19),_=n.n(L),C=(n(30),n(2)),H=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e,t,n,i,a=this.props.layer;if(!a.source.path)return null;var s,r,c,u,l="./"+_.a.join(a.source.path,m.indexHtmlFile),d=-(this.props.bounds.native.maxWidth-this.props.bounds.size.width)/2,h=-(this.props.bounds.native.maxHeight-this.props.bounds.size.height)/2;(null===(e=a.align)||void 0===e?void 0:e.indexOf("top"))>=0?(Math.round(this.props.bounds.native.maxHeight*this.props.bounds.scale)>this.props.bounds.size.height&&(h=(this.props.bounds.native.maxHeight*this.props.bounds.scale-this.props.bounds.native.maxHeight)/2),r=0):(null===(t=a.align)||void 0===t?void 0:t.indexOf("bottom"))>=0&&(Math.round(this.props.bounds.native.maxHeight*this.props.bounds.scale)>this.props.bounds.size.height&&(h=(this.props.bounds.native.maxHeight*this.props.bounds.scale-this.props.bounds.native.maxHeight)/2-(this.props.bounds.native.maxHeight*this.props.bounds.scale-this.props.bounds.size.height)),u=0),h=Math.round(h),(null===(n=a.align)||void 0===n?void 0:n.indexOf("left"))>=0?(Math.round(this.props.bounds.native.maxWidth*this.props.bounds.scale)>this.props.bounds.size.width&&(d=(this.props.bounds.native.maxWidth*this.props.bounds.scale-this.props.bounds.native.maxWidth)/2),s=0):(null===(i=a.align)||void 0===i?void 0:i.indexOf("right"))>=0&&(Math.round(this.props.bounds.native.maxWidth*this.props.bounds.scale)>this.props.bounds.size.width&&(d=(this.props.bounds.native.maxWidth*this.props.bounds.scale-this.props.bounds.native.maxWidth)/2-(this.props.bounds.native.maxWidth*this.props.bounds.scale-this.props.bounds.size.width)),c=0),d=Math.round(d);var p=this.props.bounds.native.maxWidth,b=this.props.bounds.native.maxHeight;return a.width&&(null==s&&null==c&&(s=(p-a.width)/2),p=a.width),a.height&&(null==r&&null==u&&(r=(b-a.height)/2),b=a.height),a.margin&&(a.margin.l?s?s+=a.margin.l:s=a.margin.l:a.margin.r&&(c?c+=a.margin.r:c=a.margin.r),a.margin.t?r?r+=a.margin.t:r=a.margin.t:a.margin.b&&(u?u+=a.margin.b:u=a.margin.b)),Object(C.jsx)("div",{className:"view",style:Object(o.a)(Object(o.a)(Object(o.a)({},this.props.bounds.style),this.props.style),{},{visibility:this.props.hidden||this.props.invisible?"hidden":"visible"}),children:Object(C.jsx)("div",{className:"viewScaler",style:{width:this.props.bounds.native.maxWidth,height:this.props.bounds.native.maxHeight,left:d,top:h,transform:"scale(".concat(this.props.bounds.scale,")")},children:Object(C.jsx)("iframe",{title:this.props.name,name:this.props.name,src:l,className:"viewContainer",style:{width:p,height:b,left:s,top:r,right:c,bottom:u}})})})}}]),n}(i.Component),R=H,N=(n(32),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={transition:!1,from:0,to:0,fromOffset:0,toOffset:0,scrollOffset:0},i.scrollOffset=0,i}return Object(u.a)(n,[{key:"componentDidUpdate",value:function(e,t,n){if(e.position!==this.props.position){var i=e.position,a=this.props.position,s=0,r=0;i>a?(s=this.scrollOffset,r=this.scrollOffset-1,this.scrollOffset--):i<a&&(s=this.scrollOffset,r=this.scrollOffset+1,this.scrollOffset++),this.setState(Object(o.a)(Object(o.a)({},this.state),{},{transition:!0,from:i,to:a,fromOffset:s,toOffset:r,scrollOffset:this.scrollOffset}))}}},{key:"transitionReady",value:function(){this.setState(Object(o.a)(Object(o.a)({},this.state),{},{transition:!1})),this.props.layer.master&&this.props.onTransitionReady()}},{key:"render",value:function(){var e=this,t=this.props.sequence,n=(this.props.slide,!this.props.layer.static),i=0,a=0,s=0;return n&&(a=this.state.fromOffset*this.props.bounds.size.width,s=this.state.toOffset*this.props.bounds.size.width,i=-this.state.scrollOffset*this.props.bounds.size.width),Object(C.jsx)("div",{className:"layer",style:Object(o.a)(Object(o.a)(Object(o.a)({},this.props.bounds.style),this.props.style),{},{left:i,transition:n&&this.state.transition?"left ".concat(m.transition.duration,"s ").concat(m.transition.easing," ").concat(m.transition.delay,"s"):null}),onTransitionEnd:function(){e.transitionReady()},children:t.map((function(t,i){var r=t.layers[e.props.layer.name],o=0,c=!1;return n&&(i===e.state.from?o=a:i===e.state.to?o=s:-1===e.state.from?o=0:c=!0),r.included&&!r.ignore?Object(C.jsx)(R,{name:t.id+"|"+r.name+"|"+i,layer:r,bounds:e.props.bounds,hidden:r.hiddenNow,invisible:!r.visible||c,style:{left:o}},"Slide"+i):null}))})}}]),n}(i.Component)),D=(n(33),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.state,n=t.sequence[t.position];return Object(C.jsx)("div",{id:"Projector",className:"projector",style:this.props.bounds.style,children:t.layers.map((function(i,a){var s=n.layers[i.name];return Object(C.jsx)(N,{layer:s,slide:n,sequence:t.sequence,bounds:e.props.bounds,position:t.viewPosition,onTransitionReady:e.props.onTransitionReady},i.name)}))})}}]),n}(i.Component)),W=D,A=(n(34),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).store=i.props.store,i.state={},i.transitionReadyHandler=i.transitionReadyHandler.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=this.store.subscribe((function(){e.onStoreChange()})),this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),this.mounted=!1}},{key:"componentDidUpdate",value:function(e,t,n){}},{key:"onStoreChange",value:function(){if(this.mounted){var e=this.store.getState();if(e.blockRender)return;this.setState(e)}}},{key:"transitionReadyHandler",value:function(){this.store.dispatch({type:"UNBLOCK_INTERACTION"})}},{key:"getViewPort",value:function(e,t,n){var i=Math.min(e/n.minWidth,t/n.minHeight),a=n.minWidth*i,s=n.minHeight*i,r=n.maxWidth*i,o=n.maxHeight*i;s=t<o?t:o;var c=.5*(e-(a=e<r?e:r))+n.offsetX,u=.5*(t-s)+n.offsetY,l=i*n.nominalFontSize;return{boxWidth:a=Math.round(a),boxHeight:s=Math.round(s),boxLeft:c=Math.round(c),boxTop:u=Math.round(u),boxScale:i,boxFontSize:l=Math.round(l)}}},{key:"updateGlobalFontSize",value:function(e){document.getElementsByTagName("html")[0].style["font-size"]=e+"px"}},{key:"render",value:function(){var e=[];if(e.push(this.props.children),this.state.position>=0){var t=this.getViewPort(this.props.windowWidth,this.props.windowHeight,this.state.settings),n=t.boxWidth,i=t.boxHeight,a=t.boxLeft,s=t.boxTop,r=t.boxScale,c=t.boxFontSize;if(r){var u={size:{width:n,height:i,top:s,left:a},style:{width:n+"px",height:i+"px"},native:{minWidth:this.state.settings.minWidth,minHeight:this.state.settings.minHeight,maxWidth:this.state.settings.maxWidth,maxHeight:this.state.settings.maxHeight},scale:r};this.updateGlobalFontSize(c),e.push(Object(C.jsx)("div",{id:"Container",className:"globalContainer",style:{background:this.state.settings.globalBg},children:Object(C.jsx)("div",{className:"contentContainer",style:Object(o.a)(Object(o.a)({},u.style),{},{left:a+"px",top:s+"px",background:this.state.settings.containerBg}),children:Object(C.jsx)(W,{state:this.state,bounds:u,onTransitionReady:this.transitionReadyHandler})})},"Container"))}}return e}}]),n}(i.Component)),P=n(13),q=n.n(P),z=n(8),M=function(e,t){for(var n={},i=[].concat(Object(z.a)(Object.keys(e)),Object(z.a)(Object.keys(t))),a=0;a<i.length;a++)void 0!==e[i[a]]&&null!==e[i[a]]&&""!==e[i[a]]?n[i[a]]=e[i[a]]:void 0!==t[i[a]]&&null!==t[i[a]]&&""!==t[i[a]]&&(n[i[a]]=t[i[a]]);return n},U=function(e,t){if(t)for(var n in e){var i=new RegExp("\\{"+n+"\\}","g");t=t.replace(i,e[n])}else t=null;return t},X=n(20),B=n.n(X),F=function(){function e(){Object(c.a)(this,e)}return Object(u.a)(e,[{key:"parseSettings",value:function(e){return e?e.reduce((function(e,t,n){return t&&n>0&&(e[t.A]=t.B),e}),{}):null}},{key:"parseSource",value:function(e){var t={};if(e){var n=e.split("#");n.length>1?t.frame=n[1]:t.frame=null,(n=n[0].split(">")).length>1?(t.path=n[0],t.clip=n[1]):(t.path=n[0],t.clip=null)}return t}},{key:"parseLayers",value:function(e){var t=this;if(!e)return null;var n=e[0],i=e.reduce((function(e,i,a){if(i&&a>0){var s={};for(var r in n)s[n[r]]=i[r];if(s.source=t.parseSource(s.source),s.level||(s.level=0),s.disable)return e;if(s.margin){var o=function(e,t,n){for(var i,a=[];null!==(i=e.exec(t));)if(n){for(var s=[],r=1;r<=n;r++)s.push(i[r]);a.push(s)}else a.push(i[1]);return a}(/(\D)(\d+)/gi,s.margin,2);s.margin=o.reduce((function(e,t,n){return e[t[0]]=Number(t[1]),e}),{})}e.push(s)}return e}),[]);i.sort((function(e,t){return e.level>t.level?1:e.level<t.level?-1:0}));var a=i.reduce((function(e,t,n){return e[t.name]=n,e}),{}),s=i.find((function(e){return e.master}));return s||((s=i.find((function(e){return!e.static}))).master=1),{layers:i,layerIndex:a}}},{key:"parseTemplates",value:function(e,t){var n=this;if(!e)return null;var i=e[0];return e.reduce((function(e,a,s){if(a&&s>0){var r={layers:{}};for(var o in i)i[o]in t?(r.layers[i[o]]||(r.layers[i[o]]={source:{}}),r.layers[i[o]].source=n.parseSource(a[o])):r[i[o]]=a[o];if(r.disable)return e;e[r.template]=r}return e}),{})}},{key:"parseSequence",value:function(e,t){var n=this;if(!e)return null;var i=e[0];return e.reduce((function(e,a,s){if(a&&s>0){var r={layers:{}};for(var o in i)i[o]in t?(r.layers[i[o]]||(r.layers[i[o]]={source:{}}),r.layers[i[o]].source=n.parseSource(a[o])):r[i[o]]=a[o];if(r.params){var c;try{(c=B.a.parse(r.params))||console.log("Unableto parse slide params:",r)}catch(u){console.log("Slide params parsing error:",r,u),c=null}c&&(r.params=c)}if(r.data&&(r.data=r.data.split(",")),r.index=e.length,r.disable)return e;e.push(r)}return e}),[])}},{key:"parseMenus",value:function(e){if(!e)return null;var t=e[0],n=e.reduce((function(e,n,i){if(n&&i>0){var a={};for(var s in t)a[t[s]]=n[s];e[a.id]||(e[a.id]=[]),a.index||(a.index=0),e[a.id].push(a)}return e}),{});for(var i in n)n[i].sort((function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}));return n}},{key:"parseExtraData",value:function(e){if(!e)return null;var t=e[0];return e.reduce((function(e,n,i){if(n&&i>0){var a={};for(var s in t)a[t[s]]=n[s];e[a.id]||(e[a.id]={}),e[a.id][a.property]=a}return e}),{})}},{key:"concatLayers",value:function(e,t){var n={};for(var i in e){var a=e[i];if(t[i]){var s=t[i],r=M(s,a);a.source||(a.source={}),s.source||(s.source={});var c={};null!=s.source.path&&""!==s.source.path?c.path=s.source.path:c.path=a.source.path,null!=s.source.clip?c.clip=s.source.clip:c.clip=a.source.clip,null!=s.source.frame?c.frame=s.source.frame:c.frame=a.source.frame,r.source=c,n[i]=r}else n[i]=Object(o.a)({},a)}return n}},{key:"setupLayers",value:function(e,t){for(var n in e){var i=e[n];i.source.path?i.source.path=U(t,i.source.path):i.ignore=!0,i.hiddenNow=i.hidden}return e}},{key:"collectSequence",value:function(e,t){for(var n=[],i=0;i<e.sequence.length;i++){for(var a=e.sequence[i],s={},r=0;r<e.layers.length;r++){var o=e.layers[r];s[o.name]=o}var c=e.templates[a.template];c&&(a=M(c,a),s=this.concatLayers(s,c.layers)),s=this.concatLayers(s,e.sequence[i].layers),s=this.setupLayers(s,t),a.layers=s,n.push(a)}return n}},{key:"parse",value:function(e){var t=this.parseLayers(e.layers);t.templates=this.parseTemplates(e.templates,t.layerIndex),t.sequence=this.parseSequence(e.sequence,t.layerIndex);var n=this.parseSettings(e.settings),i=this.parseMenus(e.menus),a={sequence:this.collectSequence(t,n),settings:n,menus:i,layers:t.layers},s={};for(var r in e)!(r in a)&&!(r in t)&&r.indexOf("<")<0&&(s[r]=this.parseExtraData(e[r]));return a.extraData=s,a}}]),e}(),Y=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).store=i.props.store,i.state={isLoading:!1,isLoaded:!1},i.loader=null,i.result=null,i.dataParser=new F,i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=this.store.subscribe((function(){e.onStoreChange()})),this.load(),this.mounted=!0}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),this.mounted=!1}},{key:"componentDidUpdate",value:function(e,t){}},{key:"onStoreChange",value:function(){}},{key:"load",value:function(){var e=this;this.state.isLoading||(this.setState(Object(o.a)(Object(o.a)({},this.state),{},{isLoading:!0,isLoaded:!1})),m.useEmbeddedContent&&m.content?(console.log("Extracting embedded content"),function(e){setTimeout(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100)}((function(){var t;try{t=q.a.read(m.content,{type:"base64"})}catch(i){return void e.onContentLoadError()}var n=e.convertSheetsToTables(t.Sheets);n?(n=e.dataParser.parse(n),e.onContentLoad(n)):e.onContentLoadError()}),1e3)):this.loadXlsx(m.contentUrl,(function(t){t?(t=e.dataParser.parse(t),e.onContentLoad(t)):e.onContentLoadError({lastError:{source:m.contentUrl,location:window.location.href}})})))}},{key:"onContentLoad",value:function(e){this.setState(Object(o.a)(Object(o.a)({},this.state),{},{isLoading:!1,isLoaded:!0})),this.store.dispatch(function(e){return{type:"SET_STORE_DATA",data:Object(o.a)(Object(o.a)({},e),{},{dataLoaded:!0,loadDataError:!1})}}(e))}},{key:"onContentLoadError",value:function(e){this.setState(Object(o.a)(Object(o.a)({},this.state),{},{isLoading:!1,isLoaded:!1})),this.store.dispatch(function(e){return{type:"LOAD_STORE_DATA_ERROR",data:Object(o.a)(Object(o.a)({},e),{},{dataLoaded:!1,loadDataError:!0})}}(e))}},{key:"loadXlsx",value:function(e,t){var n=this,i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=function(e){var a,s=i.response,r=n.fixXlsx(s),o=btoa(r);m.outContentToConsole&&(console.log("CONTENT XLSX COPY:"),console.log("-----------------------------------------------------------"),console.log('window.content="'+o+'"'),console.log("-----------------------------------------------------------"));try{a=q.a.read(o,{type:"base64"})}catch(e){return void t(null)}t(n.convertSheetsToTables(a.Sheets))},i.send()}},{key:"fixXlsx",value:function(e){for(var t="",n=0,i=10240;n<e.byteLength/i;++n)t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(n*i,n*i+i)));return t+=String.fromCharCode.apply(null,new Uint8Array(e.slice(n*i)))}},{key:"convertSheetsToTables",value:function(e){var t={};for(var n in e){var i=[];t[n]=i;var a=e[n];for(var s in a){var r=s.substr(1)-1,o=s.substr(0,1);null==i[r]&&(i[r]=[]),i[r][o]=a[s].v}}return t}},{key:"render",value:function(){return null}}]),n}(i.Component),V=Y,G=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).state={},i.store=i.props.store,i}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=this.store.subscribe((function(){e.onStoreChange()})),this.mounted=!0,this.initInteractions()}},{key:"componentWillUnmount",value:function(){this.unsubscribe&&this.unsubscribe(),this.mounted=!1}},{key:"onStoreChange",value:function(){var e=this;if(this.mounted){var t=this.store.getState();this.setState(t),t.dataLoaded&&!t.playbackStarted?this.store.dispatch({type:"START_PLAYBACK"}):t.loadDataError?console.log("Presentation data load error...",t.lastError):t.readyToInit&&(this.sendInit(),setTimeout((function(){e.store.dispatch({type:"INIT_IS_DONE"})}),200))}}},{key:"sendInit",value:function(){var e=this;this.state.sequence.map((function(t){for(var n in t.layers){var i=t.layers[n];i.loaded&&e.sendMessage("init",{source:i.source,params:t.params,menus:e.state.menus,data:e.state.extraData},t,i)}}))}},{key:"initInteractions",value:function(){var e=this;window.addEventListener("message",(function(t){var n=t.data.event,i=t.data.source;if(console.log("Received Message:",n,i,t),i&&i!==m.parentWindowId){var a=i.split("|"),s=(a[0],a[1]),r=a[2];if(e.state&&e.state.sequence){var o=e.state.sequence[r];if(o){var c=o.layers[s];c&&e.processInteraction(n,t.data,o,c)}}}}))}},{key:"sendMessage",value:function(e,t,n,i){var a,s;console.log("Send message:",e,t,n,i),"broadcast"===n?(s=n,a=window):(s=n.id+"|"+i.name+"|"+n.index,a=window.frames[s]),a?a.postMessage({event:e,source:m.parentWindowId,target:s,data:t},"*"):console.log("NO TARGET WINDOW",s)}},{key:"processInteraction",value:function(e,t,n,i){switch(console.log("Process interaction:",e,t,n,i),e){case"complete":this.store.dispatch((o=n.index,c=i.name,{type:"VIEW_LOADED",slideIndex:o,layerName:c}));break;case"next":if(this.state.blockInteraction)return;this.store.dispatch({type:"NEXT_SLIDE"});break;case"prev":if(this.state.blockInteraction)return;this.store.dispatch({type:"PREV_SLIDE"});break;case"goto":if(this.state.blockInteraction)return;var a;t.params?a=t.params[0]:t&&(a=t.id),this.store.dispatch({type:"GOTO_SLIDE",id:a});break;case"hide":this.store.dispatch((s=n.index,r=t.name,{type:"HIDE_LAYER",index:s,name:r}));break;case"show":this.store.dispatch(function(e,t){return{type:"SHOW_LAYER",index:e,name:t}}(n.index,t.name));break;case"switch":this.store.dispatch(function(e,t){return{type:"SWITCH_LAYER",index:e,name:t}}(n.index,t.name))}var s,r,o,c}},{key:"render",value:function(){return null}}]),n}(i.Component),K=n(22),J=n(23),$=(n(53),Object(J.a)(I,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),Q=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var i;return Object(c.a)(this,n),i=t.call(this,e),console.log(m.startAppText),i.state={},i.initHandler=i.initHandler.bind(Object(l.a)(i)),i.resizeHandler=i.resizeHandler.bind(Object(l.a)(i)),i}return Object(u.a)(n,[{key:"updateLayout",value:function(){var e=document.documentElement.clientWidth||document.body.clientWidth||window.innerWidth,t=document.documentElement.clientHeight||document.body.clientHeight||window.innerHeight;this.setState(Object(o.a)(Object(o.a)({},this.state),{},{windowWidth:e,windowHeight:t}))}},{key:"initHandler",value:function(e){this.updateLayout()}},{key:"resizeHandler",value:function(e){this.updateLayout()}},{key:"componentDidMount",value:function(){$.dispatch({type:"APP_INIT"}),window.addEventListener("load",this.initHandler),window.addEventListener("resize",this.resizeHandler)}},{key:"render",value:function(){return Object(C.jsx)(K.a,{store:$,children:Object(C.jsxs)(A,{id:"Container",windowWidth:this.state.windowWidth,windowHeight:this.state.windowHeight,store:$,children:[Object(C.jsx)(V,{store:$}),Object(C.jsx)(G,{store:$})]})})}}]),n}(i.Component),Z=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,55)).then((function(t){var n=t.getCLS,i=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),i(e),a(e),s(e),r(e)}))};r.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(Q,{})}),document.getElementById("root")),Z()}},[[54,1,2]]]);
//# sourceMappingURL=main.2ab620aa.chunk.js.map